apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "tbyte-microservices.fullname" . }}-frontend-html
  namespace: {{ .Release.Namespace }}
data:
  index.html: |
    <!DOCTYPE html>
    <html>
    <head>
        <title>TByte Microservices</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            .container { max-width: 800px; margin: 0 auto; }
            .status { padding: 20px; border-radius: 5px; margin: 20px 0; }
            .success { background-color: #d4edda; color: #155724; }
            .error { background-color: #f8d7da; color: #721c24; }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üöÄ TByte Microservices Platform</h1>
            <p>Production-ready microservices on AWS EKS with GitOps</p>
            
            <div id="status" class="status">
                <p>Checking backend connection...</p>
            </div>
            
            <h2>Features</h2>
            <ul>
                <li>‚úÖ Kubernetes deployment</li>
                <li>‚úÖ External Secrets Operator</li>
                <li>‚úÖ AWS RDS integration</li>
                <li>‚úÖ GitOps with ArgoCD</li>
            </ul>
        </div>
        
        <script>
            fetch('/api/health')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('status').innerHTML = 
                        '<p>‚úÖ Backend connected successfully!</p><pre>' + JSON.stringify(data, null, 2) + '</pre>';
                    document.getElementById('status').className = 'status success';
                })
                .catch(error => {
                    document.getElementById('status').innerHTML = 
                        '<p>‚ùå Backend connection failed: ' + error.message + '</p>';
                    document.getElementById('status').className = 'status error';
                });
        </script>
    </body>
    </html>
